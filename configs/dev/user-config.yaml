# 开发环境配置示例
# 复制此文件为 config.yaml 并修改相应配置

# 服务配置
Name: user-service
ListenOn: 0.0.0.0:8000
Mode: dev

# etcd 服务注册发现（开发环境可选，使用直连模式可不配置）
# Etcd:
#   Hosts:
#     - localhost:2379
#   Key: user-service.rpc

# 超时配置
Timeout: 5000  # 超时时间（毫秒），0 表示无超时

# CPU 降载阈值（0-1000，默认 900 即 90%）
CpuThreshold: 900

# 健康检查
Health: true  # 是否开启 gRPC 健康检查

# 中间件配置
Middlewares:
  Trace: true       # 链路追踪中间件
  Recover: true     # 异常捕获中间件
  Stat: true        # 统计中间件
  Prometheus: true # Prometheus 指标中间件
  Breaker: true     # 熔断中间件

# 日志配置
Log:
  ServiceName: user-service
  Mode: console  # console, file, volume
  Level: debug
  Path: logs
  Compress: true
  KeepDays: 7
  StackCooldownMillis: 100

# Prometheus 配置
Prometheus:
  Host: 0.0.0.0
  Port: 9091
  Path: /metrics

# 数据库配置
Database:
  Driver: mysql
  Host: localhost
  Port: 3306
  User: root
  Password: 123456
  Database: ecommerce
  Charset: utf8mb4
  MaxOpenConns: 100
  MaxIdleConns: 10
  ConnMaxLifetime: 3600
  ConnMaxIdleTime: 600

# Redis配置
Redis:
  Host: localhost
  Port: 6379
  Password: ""
  Database: 0
  PoolSize: 10
  MinIdleConns: 5

# JWT配置
JWT:
  Secret: your-secret-key-here
  Expire: 7200 # 秒
